{"ast":null,"code":"import{jsxs as _jsxs}from\"react/jsx-runtime\";import{jsx as _jsx}from\"react/jsx-runtime\";import _regeneratorRuntime from\"/Users/user/GitHub/remotesports/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/user/GitHub/remotesports/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/Users/user/GitHub/remotesports/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState}from\"react\";import{auth,provider}from\"../../firebase\";import{toast}from\"react-toastify\";import{Button}from\"antd\";import{MailOutlined,GoogleOutlined}from\"@ant-design/icons\";import{useDispatch}from\"react-redux\";import\"../../css/Login.css\";import{Link}from\"react-router-dom\";var Login=function Login(_ref){var history=_ref.history;var _useState=useState(\"\"),_useState2=_slicedToArray(_useState,2),email=_useState2[0],setEmail=_useState2[1];var _useState3=useState(\"\"),_useState4=_slicedToArray(_useState3,2),password=_useState4[0],setPassword=_useState4[1];// So para ser uma pouco user friendly...\nvar _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),loading=_useState6[0],setLoading=_useState6[1];var dispatch=useDispatch();var handleSubmit=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(e){var result,user,idTokenResult;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:e.preventDefault();setLoading(true);_context.prev=2;_context.next=5;return auth.signInWithEmailAndPassword(email,password);case 5:result=_context.sent;user=result.user;_context.next=9;return user.getIdTokenResult();case 9:idTokenResult=_context.sent;dispatch({type:\"LOGGED_IN_USER\",payload:{email:user.email,token:idTokenResult.token}});history.push(\"/mainpage\");_context.next=19;break;case 14:_context.prev=14;_context.t0=_context[\"catch\"](2);console.log(_context.t0);toast.error(_context.t0.message);setLoading(false);case 19:case\"end\":return _context.stop();}}},_callee,null,[[2,14]]);}));return function handleSubmit(_x){return _ref2.apply(this,arguments);};}();var googleLogin=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(){return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:_context3.next=2;return auth.signInWithPopup(provider).then(/*#__PURE__*/function(){var _ref4=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(result){var user,idTokenResult;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:user=result.user;_context2.next=3;return user.getIdTokenResult();case 3:idTokenResult=_context2.sent;dispatch({type:\"LOGGED_IN_USER\",payload:{email:user.email,token:idTokenResult.token}});history.push(\"/mainpage\");case 6:case\"end\":return _context2.stop();}}},_callee2);}));return function(_x2){return _ref4.apply(this,arguments);};}()).catch(function(error){toast.error(error.message);});case 2:case\"end\":return _context3.stop();}}},_callee3);}));return function googleLogin(){return _ref3.apply(this,arguments);};}();var LoginForm=function LoginForm(){return/*#__PURE__*/_jsx(\"div\",{id:\"loginform\",children:/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,children:[/*#__PURE__*/_jsx(\"div\",{className:\"form-group\",children:/*#__PURE__*/_jsx(\"input\",{type:\"email\",name:\"email\",className:\"form-control\",value:email,onChange:function onChange(e){return setEmail(e.target.value);},autoFocus:true,placeholder:\"Email\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"form-group\",children:/*#__PURE__*/_jsx(\"input\",{type:\"password\",name:\"password\",className:\"form-control\",value:password,onChange:function onChange(e){return setPassword(e.target.value);},placeholder:\"Password\"})}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(Button,{onClick:handleSubmit,type:\"primary\",className:\"mb-3\",shape:\"round\",block:true,icon:/*#__PURE__*/_jsx(MailOutlined,{}),size:\"large\",disabled:!email||password.length<6,children:\"Login with Email/Password\"})]})});};return/*#__PURE__*/_jsx(\"div\",{className:\"wrapper\",children:/*#__PURE__*/_jsx(\"div\",{className:\"container p-5\",children:/*#__PURE__*/_jsx(\"div\",{className:\"row\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"col-md-6 offset-md-3\",children:[loading?/*#__PURE__*/_jsx(\"h3\",{className:\"text-danger\",children:\"Loading...\"}):/*#__PURE__*/_jsx(\"h3\",{children:\"Login\"}),LoginForm(),/*#__PURE__*/_jsx(Button,{onClick:googleLogin,type:\"danger\",className:\"mb-3\",shape:\"round\",block:true,icon:/*#__PURE__*/_jsx(GoogleOutlined,{}),size:\"large\",children:\"Google Account Login\"}),/*#__PURE__*/_jsx(Link,{to:\"/forgot/password\",className:\"text-danger float-right\",children:\"Forgot Password\"})]})})})});};export default Login;","map":{"version":3,"sources":["/Users/user/GitHub/remotesports/client/src/pages/auth/Login.js"],"names":["React","useState","auth","provider","toast","Button","MailOutlined","GoogleOutlined","useDispatch","Link","Login","history","email","setEmail","password","setPassword","loading","setLoading","dispatch","handleSubmit","e","preventDefault","signInWithEmailAndPassword","result","user","getIdTokenResult","idTokenResult","type","payload","token","push","console","log","error","message","googleLogin","signInWithPopup","then","catch","LoginForm","target","value","length"],"mappings":"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","sourcesContent":["import React, { useState } from \"react\";\nimport { auth, provider } from \"../../firebase\";\nimport { toast } from \"react-toastify\";\nimport { Button } from \"antd\";\nimport { MailOutlined, GoogleOutlined } from \"@ant-design/icons\";\nimport { useDispatch } from \"react-redux\";\nimport \"../../css/Login.css\";\nimport { Link } from \"react-router-dom\";\n\nconst Login = ({ history }) => {\n  const [email, setEmail] = useState(\"\");\n  const [password, setPassword] = useState(\"\");\n\n  // So para ser uma pouco user friendly...\n  const [loading, setLoading] = useState(false);\n\n  let dispatch = useDispatch();\n\n  const handleSubmit = async (e) => {\n    e.preventDefault();\n    setLoading(true);\n    try {\n      const result = await auth.signInWithEmailAndPassword(email, password);\n\n      const { user } = result;\n      const idTokenResult = await user.getIdTokenResult();\n\n      dispatch({\n        type: \"LOGGED_IN_USER\",\n        payload: {\n          email: user.email,\n          token: idTokenResult.token,\n        },\n      });\n\n      history.push(\"/mainpage\");\n    } catch (error) {\n      console.log(error);\n      toast.error(error.message);\n      setLoading(false);\n    }\n  };\n\n  const googleLogin = async () => {\n    await auth\n      .signInWithPopup(provider)\n      .then(async function (result) {\n        const { user } = result;\n        const idTokenResult = await user.getIdTokenResult();\n\n        dispatch({\n          type: \"LOGGED_IN_USER\",\n          payload: {\n            email: user.email,\n            token: idTokenResult.token,\n          },\n        });\n\n        history.push(\"/mainpage\");\n      })\n      .catch(function (error) {\n        toast.error(error.message);\n      });\n  };\n\n  const LoginForm = () => (\n    <div id=\"loginform\">\n      <form onSubmit={handleSubmit}>\n        <div className=\"form-group\">\n          <input\n            type=\"email\"\n            name=\"email\"\n            className=\"form-control\"\n            value={email}\n            onChange={(e) => setEmail(e.target.value)}\n            autoFocus\n            placeholder=\"Email\"\n          />\n        </div>\n        <div className=\"form-group\">\n          <input\n            type=\"password\"\n            name=\"password\"\n            className=\"form-control\"\n            value={password}\n            onChange={(e) => setPassword(e.target.value)}\n            placeholder=\"Password\"\n          />\n        </div>\n\n        <br />\n        <Button\n          onClick={handleSubmit}\n          type=\"primary\"\n          className=\"mb-3\"\n          shape=\"round\"\n          block\n          icon={<MailOutlined />}\n          size=\"large\"\n          disabled={!email || password.length < 6}\n        >\n          Login with Email/Password\n        </Button>\n      </form>\n    </div>\n  );\n\n  return (\n    <div className=\"wrapper\">\n      <div className=\"container p-5\">\n        <div className=\"row\">\n          <div className=\"col-md-6 offset-md-3\">\n            {loading ? (\n              <h3 className=\"text-danger\">Loading...</h3>\n            ) : (\n              <h3>Login</h3>\n            )}\n            {LoginForm()}\n\n            <Button\n              onClick={googleLogin}\n              type=\"danger\"\n              className=\"mb-3\"\n              shape=\"round\"\n              block\n              icon={<GoogleOutlined />}\n              size=\"large\"\n            >\n              Google Account Login\n            </Button>\n\n            <Link to=\"/forgot/password\" className=\"text-danger float-right\">\n              Forgot Password\n            </Link>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default Login;\n"]},"metadata":{},"sourceType":"module"}