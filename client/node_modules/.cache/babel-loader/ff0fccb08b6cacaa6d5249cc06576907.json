{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nvar _jsxFileName = \"/Users/user/Documents/GitHub/remotesports/client/src/pages/auth/RegisterComplete.js\",\n    _s = $RefreshSig$();\n\nimport React, { useEffect, useState } from \"react\";\nimport { auth, db } from \"../../firebase\";\nimport { toast } from \"react-toastify\";\nimport { Button } from \"antd\";\nimport { CheckOutlined } from \"@ant-design/icons\";\nimport \"../../css/RegisterComplete.css\";\nimport { CountryDropdown, RegionDropdown } from \"react-country-region-selector\";\nimport PhoneInput from \"react-phone-number-input\";\nimport \"react-phone-number-input/style.css\";\nimport FileUploader from \"react-firebase-file-uploader\";\n\nconst RegisterComplete = ({\n  history\n}) => {\n  _s();\n\n  const [email, setEmail] = useState(\"\");\n  const [password, setPassword] = useState(\"\");\n  const [name, setName] = useState(\"\");\n  const [country, selectCountry] = useState(\"\");\n  const [region, selectRegion] = useState(\"\");\n  const [phoneNumber, setPhoneNumber] = useState(\"\");\n  const [isTeacher, setIsTeacher] = useState(\"\");\n  const [school, setSchool] = useState(\"\");\n  const [profileImage, setProfileImage] = useState(\"\");\n  useEffect(() => {\n    setEmail(window.localStorage.getItem(\"emailForRegistration\"));\n  }, []);\n\n  const handleSubmit = async e => {\n    e.preventDefault();\n\n    if (!email || !password || !name) {\n      toast.error(\"You forgot some details!\");\n      return;\n    }\n\n    if (password.length < 6) {\n      toast.error(\"Password must contain at least 6 characters!\");\n      return;\n    }\n\n    try {\n      const result = await auth.signInWithEmailLink(email, window.location.href);\n\n      if (result.user.emailVerified) {\n        // remover o email da local storage\n        window.localStorage.removeItem(\"emailForRegistration\"); // receber o token do id utilizador\n\n        let user = auth.currentUser;\n        await user.updatePassword(password);\n        toast.success(`ðŸ¤ª Excellent! You complete your registration! Welcome to RemoteSports!`, {\n          position: \"top-right\",\n          autoClose: 5000,\n          hideProgressBar: true,\n          closeOnClick: true,\n          pauseOnHover: true,\n          draggable: true,\n          progress: undefined\n        });\n        db.collection(\"users\").doc(auth.currentUser.uid).set({\n          email: email,\n          name: name,\n          country: country,\n          region: region,\n          phoneNumber: phoneNumber,\n          isTeacher: isTeacher,\n          school: school,\n          profileImage: profileImage\n        }).then(function () {\n          console.log(\"Document successfully written!\");\n        }).catch(function (error) {\n          console.error(\"Error writing document: \", error);\n          toast.error(error);\n        });\n        history.push(\"/mainpage\");\n      }\n    } catch (error) {\n      toast.error(`ðŸ˜¥ ${error}`, {\n        position: \"top-right\",\n        autoClose: 5000,\n        hideProgressBar: true,\n        closeOnClick: true,\n        pauseOnHover: true,\n        draggable: true,\n        progress: undefined\n      });\n      return;\n    }\n  };\n\n  const completeRegistrationForm = () => /*#__PURE__*/_jsxDEV(\"form\", {\n    onSubmit: handleSubmit,\n    children: [/*#__PURE__*/_jsxDEV(\"label\", {\n      children: \"Profile Image\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 108,\n      columnNumber: 7\n    }, this), profileImage && /*#__PURE__*/_jsxDEV(\"img\", {\n      src: profileImage,\n      alt: \"\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 109,\n      columnNumber: 28\n    }, this), /*#__PURE__*/_jsxDEV(FileUploader, {\n      accept: \"image/*\",\n      name: \"avatar\",\n      randomizeFilename: true,\n      onUploadSuccess: e => setProfileImage(e.target.value)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 110,\n      columnNumber: 11\n    }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 116,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 117,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n      type: \"email\",\n      className: \"form-control\",\n      value: email,\n      readOnly: true\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 118,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 119,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n      type: \"password\",\n      className: \"form-control\",\n      value: password,\n      onChange: e => setPassword(e.target.value),\n      placeholder: \"Password\",\n      autoFocus: true,\n      required: true\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 120,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 129,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n      type: \"text\",\n      className: \"form-control\",\n      value: name,\n      onChange: e => setName(e.target.value),\n      placeholder: \"Name\",\n      autoFocus: true,\n      required: \"true\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 130,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 139,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(CountryDropdown, {\n      value: country,\n      onChange: selectCountry,\n      style: {\n        fontSize: 15\n      }\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 140,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 145,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 146,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(RegionDropdown, {\n      disableWhenEmpty: true,\n      country: country,\n      value: region,\n      onChange: selectRegion,\n      style: {\n        fontSize: 15\n      }\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 147,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 154,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 155,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(PhoneInput, {\n      international: true,\n      defaultCountry: \"PT\",\n      value: phoneNumber,\n      onChange: setPhoneNumber\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 156,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 162,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"h3\", {\n      children: \"Type of User\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 163,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n      onChange: e => setIsTeacher(e.target.value),\n      children: [/*#__PURE__*/_jsxDEV(\"option\", {\n        value: isTeacher,\n        children: \"Teacher\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 165,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n        value: isTeacher,\n        children: \"Student\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 166,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n        value: isTeacher,\n        children: \"Other\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 167,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 164,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 169,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 170,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n      type: \"text\",\n      className: \"form-control\",\n      value: school,\n      onChange: e => setSchool(e.target.value),\n      placeholder: \"School\",\n      autoFocus: true,\n      required: \"false\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 171,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 180,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Button, {\n      onClick: handleSubmit,\n      type: \"primary\",\n      className: \"mb-3\",\n      shape: \"round\",\n      block: true,\n      icon: /*#__PURE__*/_jsxDEV(CheckOutlined, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 187,\n        columnNumber: 15\n      }, this),\n      size: \"large\",\n      disabled: !email || !password || !country,\n      children: \"Finish your Registration\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 181,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 107,\n    columnNumber: 5\n  }, this);\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"wrapper\",\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"container p-5\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"row\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"col-md-6 offset-md-3\",\n          children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n            children: \"Complete your Registration\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 201,\n            columnNumber: 13\n          }, this), completeRegistrationForm()]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 200,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 199,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 198,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 197,\n    columnNumber: 5\n  }, this);\n};\n\n_s(RegisterComplete, \"doDk7ALxVd4nY0D+hB6ASZffGuE=\");\n\n_c = RegisterComplete;\nexport default RegisterComplete;\n\nvar _c;\n\n$RefreshReg$(_c, \"RegisterComplete\");","map":{"version":3,"sources":["/Users/user/Documents/GitHub/remotesports/client/src/pages/auth/RegisterComplete.js"],"names":["React","useEffect","useState","auth","db","toast","Button","CheckOutlined","CountryDropdown","RegionDropdown","PhoneInput","FileUploader","RegisterComplete","history","email","setEmail","password","setPassword","name","setName","country","selectCountry","region","selectRegion","phoneNumber","setPhoneNumber","isTeacher","setIsTeacher","school","setSchool","profileImage","setProfileImage","window","localStorage","getItem","handleSubmit","e","preventDefault","error","length","result","signInWithEmailLink","location","href","user","emailVerified","removeItem","currentUser","updatePassword","success","position","autoClose","hideProgressBar","closeOnClick","pauseOnHover","draggable","progress","undefined","collection","doc","uid","set","then","console","log","catch","push","completeRegistrationForm","target","value","fontSize"],"mappings":";;;;;AAAA,OAAOA,KAAP,IAAgBC,SAAhB,EAA2BC,QAA3B,QAA2C,OAA3C;AACA,SAASC,IAAT,EAAeC,EAAf,QAAyB,gBAAzB;AACA,SAASC,KAAT,QAAsB,gBAAtB;AACA,SAASC,MAAT,QAAuB,MAAvB;AACA,SAASC,aAAT,QAA8B,mBAA9B;AACA,OAAO,gCAAP;AACA,SAASC,eAAT,EAA0BC,cAA1B,QAAgD,+BAAhD;AACA,OAAOC,UAAP,MAAuB,0BAAvB;AACA,OAAO,oCAAP;AACA,OAAOC,YAAP,MAAyB,8BAAzB;;AAEA,MAAMC,gBAAgB,GAAG,CAAC;AAAEC,EAAAA;AAAF,CAAD,KAAiB;AAAA;;AACxC,QAAM,CAACC,KAAD,EAAQC,QAAR,IAAoBb,QAAQ,CAAC,EAAD,CAAlC;AACA,QAAM,CAACc,QAAD,EAAWC,WAAX,IAA0Bf,QAAQ,CAAC,EAAD,CAAxC;AACA,QAAM,CAACgB,IAAD,EAAOC,OAAP,IAAkBjB,QAAQ,CAAC,EAAD,CAAhC;AACA,QAAM,CAACkB,OAAD,EAAUC,aAAV,IAA2BnB,QAAQ,CAAC,EAAD,CAAzC;AACA,QAAM,CAACoB,MAAD,EAASC,YAAT,IAAyBrB,QAAQ,CAAC,EAAD,CAAvC;AACA,QAAM,CAACsB,WAAD,EAAcC,cAAd,IAAgCvB,QAAQ,CAAC,EAAD,CAA9C;AACA,QAAM,CAACwB,SAAD,EAAYC,YAAZ,IAA4BzB,QAAQ,CAAC,EAAD,CAA1C;AACA,QAAM,CAAC0B,MAAD,EAASC,SAAT,IAAsB3B,QAAQ,CAAC,EAAD,CAApC;AACA,QAAM,CAAC4B,YAAD,EAAeC,eAAf,IAAkC7B,QAAQ,CAAC,EAAD,CAAhD;AAEAD,EAAAA,SAAS,CAAC,MAAM;AACdc,IAAAA,QAAQ,CAACiB,MAAM,CAACC,YAAP,CAAoBC,OAApB,CAA4B,sBAA5B,CAAD,CAAR;AACD,GAFQ,EAEN,EAFM,CAAT;;AAIA,QAAMC,YAAY,GAAG,MAAOC,CAAP,IAAa;AAChCA,IAAAA,CAAC,CAACC,cAAF;;AAEA,QAAI,CAACvB,KAAD,IAAU,CAACE,QAAX,IAAuB,CAACE,IAA5B,EAAkC;AAChCb,MAAAA,KAAK,CAACiC,KAAN,CAAY,0BAAZ;AACA;AACD;;AAED,QAAItB,QAAQ,CAACuB,MAAT,GAAkB,CAAtB,EAAyB;AACvBlC,MAAAA,KAAK,CAACiC,KAAN,CAAY,8CAAZ;AACA;AACD;;AAED,QAAI;AACF,YAAME,MAAM,GAAG,MAAMrC,IAAI,CAACsC,mBAAL,CACnB3B,KADmB,EAEnBkB,MAAM,CAACU,QAAP,CAAgBC,IAFG,CAArB;;AAKA,UAAIH,MAAM,CAACI,IAAP,CAAYC,aAAhB,EAA+B;AAC7B;AAEAb,QAAAA,MAAM,CAACC,YAAP,CAAoBa,UAApB,CAA+B,sBAA/B,EAH6B,CAK7B;;AAEA,YAAIF,IAAI,GAAGzC,IAAI,CAAC4C,WAAhB;AACA,cAAMH,IAAI,CAACI,cAAL,CAAoBhC,QAApB,CAAN;AAEAX,QAAAA,KAAK,CAAC4C,OAAN,CACG,wEADH,EAEE;AACEC,UAAAA,QAAQ,EAAE,WADZ;AAEEC,UAAAA,SAAS,EAAE,IAFb;AAGEC,UAAAA,eAAe,EAAE,IAHnB;AAIEC,UAAAA,YAAY,EAAE,IAJhB;AAKEC,UAAAA,YAAY,EAAE,IALhB;AAMEC,UAAAA,SAAS,EAAE,IANb;AAOEC,UAAAA,QAAQ,EAAEC;AAPZ,SAFF;AAaArD,QAAAA,EAAE,CAACsD,UAAH,CAAc,OAAd,EACGC,GADH,CACOxD,IAAI,CAAC4C,WAAL,CAAiBa,GADxB,EAEGC,GAFH,CAEO;AACH/C,UAAAA,KAAK,EAAEA,KADJ;AAEHI,UAAAA,IAAI,EAAEA,IAFH;AAGHE,UAAAA,OAAO,EAAEA,OAHN;AAIHE,UAAAA,MAAM,EAAEA,MAJL;AAKHE,UAAAA,WAAW,EAAEA,WALV;AAMHE,UAAAA,SAAS,EAAEA,SANR;AAOHE,UAAAA,MAAM,EAAEA,MAPL;AAQHE,UAAAA,YAAY,EAAEA;AARX,SAFP,EAaGgC,IAbH,CAaQ,YAAY;AAChBC,UAAAA,OAAO,CAACC,GAAR,CAAY,gCAAZ;AACD,SAfH,EAgBGC,KAhBH,CAgBS,UAAU3B,KAAV,EAAiB;AACtByB,UAAAA,OAAO,CAACzB,KAAR,CAAc,0BAAd,EAA0CA,KAA1C;AACAjC,UAAAA,KAAK,CAACiC,KAAN,CAAYA,KAAZ;AACD,SAnBH;AAqBAzB,QAAAA,OAAO,CAACqD,IAAR,CAAa,WAAb;AACD;AACF,KApDD,CAoDE,OAAO5B,KAAP,EAAc;AACdjC,MAAAA,KAAK,CAACiC,KAAN,CAAa,MAAKA,KAAM,EAAxB,EAA2B;AACzBY,QAAAA,QAAQ,EAAE,WADe;AAEzBC,QAAAA,SAAS,EAAE,IAFc;AAGzBC,QAAAA,eAAe,EAAE,IAHQ;AAIzBC,QAAAA,YAAY,EAAE,IAJW;AAKzBC,QAAAA,YAAY,EAAE,IALW;AAMzBC,QAAAA,SAAS,EAAE,IANc;AAOzBC,QAAAA,QAAQ,EAAEC;AAPe,OAA3B;AASA;AACD;AACF,GA7ED;;AA+EA,QAAMU,wBAAwB,GAAG,mBAC/B;AAAM,IAAA,QAAQ,EAAEhC,YAAhB;AAAA,4BACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,YADF,EAEOL,YAAY,iBAAI;AAAK,MAAA,GAAG,EAAEA,YAAV;AAAwB,MAAA,GAAG,EAAC;AAA5B;AAAA;AAAA;AAAA;AAAA,YAFvB,eAGM,QAAC,YAAD;AACE,MAAA,MAAM,EAAC,SADT;AAEE,MAAA,IAAI,EAAC,QAFP;AAGE,MAAA,iBAAiB,MAHnB;AAIE,MAAA,eAAe,EAAGM,CAAD,IAAOL,eAAe,CAACK,CAAC,CAACgC,MAAF,CAASC,KAAV;AAJzC;AAAA;AAAA;AAAA;AAAA,YAHN,eASE;AAAA;AAAA;AAAA;AAAA,YATF,eAUE;AAAA;AAAA;AAAA;AAAA,YAVF,eAWE;AAAO,MAAA,IAAI,EAAC,OAAZ;AAAoB,MAAA,SAAS,EAAC,cAA9B;AAA6C,MAAA,KAAK,EAAEvD,KAApD;AAA2D,MAAA,QAAQ;AAAnE;AAAA;AAAA;AAAA;AAAA,YAXF,eAYE;AAAA;AAAA;AAAA;AAAA,YAZF,eAaE;AACE,MAAA,IAAI,EAAC,UADP;AAEE,MAAA,SAAS,EAAC,cAFZ;AAGE,MAAA,KAAK,EAAEE,QAHT;AAIE,MAAA,QAAQ,EAAGoB,CAAD,IAAOnB,WAAW,CAACmB,CAAC,CAACgC,MAAF,CAASC,KAAV,CAJ9B;AAKE,MAAA,WAAW,EAAC,UALd;AAME,MAAA,SAAS,MANX;AAOE,MAAA,QAAQ;AAPV;AAAA;AAAA;AAAA;AAAA,YAbF,eAsBE;AAAA;AAAA;AAAA;AAAA,YAtBF,eAuBE;AACE,MAAA,IAAI,EAAC,MADP;AAEE,MAAA,SAAS,EAAC,cAFZ;AAGE,MAAA,KAAK,EAAEnD,IAHT;AAIE,MAAA,QAAQ,EAAGkB,CAAD,IAAOjB,OAAO,CAACiB,CAAC,CAACgC,MAAF,CAASC,KAAV,CAJ1B;AAKE,MAAA,WAAW,EAAC,MALd;AAME,MAAA,SAAS,MANX;AAOE,MAAA,QAAQ,EAAC;AAPX;AAAA;AAAA;AAAA;AAAA,YAvBF,eAgCE;AAAA;AAAA;AAAA;AAAA,YAhCF,eAiCE,QAAC,eAAD;AACE,MAAA,KAAK,EAAEjD,OADT;AAEE,MAAA,QAAQ,EAAEC,aAFZ;AAGE,MAAA,KAAK,EAAE;AAAEiD,QAAAA,QAAQ,EAAE;AAAZ;AAHT;AAAA;AAAA;AAAA;AAAA,YAjCF,eAsCE;AAAA;AAAA;AAAA;AAAA,YAtCF,eAuCE;AAAA;AAAA;AAAA;AAAA,YAvCF,eAwCE,QAAC,cAAD;AACE,MAAA,gBAAgB,EAAE,IADpB;AAEE,MAAA,OAAO,EAAElD,OAFX;AAGE,MAAA,KAAK,EAAEE,MAHT;AAIE,MAAA,QAAQ,EAAEC,YAJZ;AAKE,MAAA,KAAK,EAAE;AAAE+C,QAAAA,QAAQ,EAAE;AAAZ;AALT;AAAA;AAAA;AAAA;AAAA,YAxCF,eA+CE;AAAA;AAAA;AAAA;AAAA,YA/CF,eAgDE;AAAA;AAAA;AAAA;AAAA,YAhDF,eAiDE,QAAC,UAAD;AACE,MAAA,aAAa,MADf;AAEE,MAAA,cAAc,EAAC,IAFjB;AAGE,MAAA,KAAK,EAAE9C,WAHT;AAIE,MAAA,QAAQ,EAAEC;AAJZ;AAAA;AAAA;AAAA;AAAA,YAjDF,eAuDE;AAAA;AAAA;AAAA;AAAA,YAvDF,eAwDE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,YAxDF,eAyDE;AAAQ,MAAA,QAAQ,EAAGW,CAAD,IAAOT,YAAY,CAACS,CAAC,CAACgC,MAAF,CAASC,KAAV,CAArC;AAAA,8BACE;AAAQ,QAAA,KAAK,EAAE3C,SAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,cADF,eAEE;AAAQ,QAAA,KAAK,EAAEA,SAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,cAFF,eAGE;AAAQ,QAAA,KAAK,EAAEA,SAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,cAHF;AAAA;AAAA;AAAA;AAAA;AAAA,YAzDF,eA8DE;AAAA;AAAA;AAAA;AAAA,YA9DF,eA+DE;AAAA;AAAA;AAAA;AAAA,YA/DF,eAgEE;AACE,MAAA,IAAI,EAAC,MADP;AAEE,MAAA,SAAS,EAAC,cAFZ;AAGE,MAAA,KAAK,EAAEE,MAHT;AAIE,MAAA,QAAQ,EAAGQ,CAAD,IAAOP,SAAS,CAACO,CAAC,CAACgC,MAAF,CAASC,KAAV,CAJ5B;AAKE,MAAA,WAAW,EAAC,QALd;AAME,MAAA,SAAS,MANX;AAOE,MAAA,QAAQ,EAAC;AAPX;AAAA;AAAA;AAAA;AAAA,YAhEF,eAyEE;AAAA;AAAA;AAAA;AAAA,YAzEF,eA0EE,QAAC,MAAD;AACE,MAAA,OAAO,EAAElC,YADX;AAEE,MAAA,IAAI,EAAC,SAFP;AAGE,MAAA,SAAS,EAAC,MAHZ;AAIE,MAAA,KAAK,EAAC,OAJR;AAKE,MAAA,KAAK,MALP;AAME,MAAA,IAAI,eAAE,QAAC,aAAD;AAAA;AAAA;AAAA;AAAA,cANR;AAOE,MAAA,IAAI,EAAC,OAPP;AAQE,MAAA,QAAQ,EAAE,CAACrB,KAAD,IAAU,CAACE,QAAX,IAAuB,CAACI,OARpC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,YA1EF;AAAA;AAAA;AAAA;AAAA;AAAA,UADF;;AA0FA,sBACE;AAAK,IAAA,SAAS,EAAC,SAAf;AAAA,2BACE;AAAK,MAAA,SAAS,EAAC,eAAf;AAAA,6BACE;AAAK,QAAA,SAAS,EAAC,KAAf;AAAA,+BACE;AAAK,UAAA,SAAS,EAAC,sBAAf;AAAA,kCACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBADF,EAEG+C,wBAAwB,EAF3B;AAAA;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA,UADF;AAYD,CApMD;;GAAMvD,gB;;KAAAA,gB;AAsMN,eAAeA,gBAAf","sourcesContent":["import React, { useEffect, useState } from \"react\";\nimport { auth, db } from \"../../firebase\";\nimport { toast } from \"react-toastify\";\nimport { Button } from \"antd\";\nimport { CheckOutlined } from \"@ant-design/icons\";\nimport \"../../css/RegisterComplete.css\";\nimport { CountryDropdown, RegionDropdown } from \"react-country-region-selector\";\nimport PhoneInput from \"react-phone-number-input\";\nimport \"react-phone-number-input/style.css\";\nimport FileUploader from \"react-firebase-file-uploader\";\n\nconst RegisterComplete = ({ history }) => {\n  const [email, setEmail] = useState(\"\");\n  const [password, setPassword] = useState(\"\");\n  const [name, setName] = useState(\"\");\n  const [country, selectCountry] = useState(\"\");\n  const [region, selectRegion] = useState(\"\");\n  const [phoneNumber, setPhoneNumber] = useState(\"\");\n  const [isTeacher, setIsTeacher] = useState(\"\");\n  const [school, setSchool] = useState(\"\");\n  const [profileImage, setProfileImage] = useState(\"\");\n\n  useEffect(() => {\n    setEmail(window.localStorage.getItem(\"emailForRegistration\"));\n  }, []);\n\n  const handleSubmit = async (e) => {\n    e.preventDefault();\n\n    if (!email || !password || !name) {\n      toast.error(\"You forgot some details!\");\n      return;\n    }\n\n    if (password.length < 6) {\n      toast.error(\"Password must contain at least 6 characters!\");\n      return;\n    }\n\n    try {\n      const result = await auth.signInWithEmailLink(\n        email,\n        window.location.href\n      );\n\n      if (result.user.emailVerified) {\n        // remover o email da local storage\n\n        window.localStorage.removeItem(\"emailForRegistration\");\n\n        // receber o token do id utilizador\n\n        let user = auth.currentUser;\n        await user.updatePassword(password);\n\n        toast.success(\n          `ðŸ¤ª Excellent! You complete your registration! Welcome to RemoteSports!`,\n          {\n            position: \"top-right\",\n            autoClose: 5000,\n            hideProgressBar: true,\n            closeOnClick: true,\n            pauseOnHover: true,\n            draggable: true,\n            progress: undefined,\n          }\n        );\n\n        db.collection(\"users\")\n          .doc(auth.currentUser.uid)\n          .set({\n            email: email,\n            name: name,\n            country: country,\n            region: region,\n            phoneNumber: phoneNumber,\n            isTeacher: isTeacher,\n            school: school,\n            profileImage: profileImage,\n          })\n\n          .then(function () {\n            console.log(\"Document successfully written!\");\n          })\n          .catch(function (error) {\n            console.error(\"Error writing document: \", error);\n            toast.error(error);\n          });\n\n        history.push(\"/mainpage\");\n      }\n    } catch (error) {\n      toast.error(`ðŸ˜¥ ${error}`, {\n        position: \"top-right\",\n        autoClose: 5000,\n        hideProgressBar: true,\n        closeOnClick: true,\n        pauseOnHover: true,\n        draggable: true,\n        progress: undefined,\n      });\n      return;\n    }\n  };\n\n  const completeRegistrationForm = () => (\n    <form onSubmit={handleSubmit}>\n      <label>Profile Image</label>\n          {profileImage && <img src={profileImage} alt=\"\"/>}\n          <FileUploader\n            accept=\"image/*\"\n            name=\"avatar\"\n            randomizeFilename\n            onUploadSuccess={(e) => setProfileImage(e.target.value)}\n          />\n      <br />\n      <br />\n      <input type=\"email\" className=\"form-control\" value={email} readOnly />\n      <br />\n      <input\n        type=\"password\"\n        className=\"form-control\"\n        value={password}\n        onChange={(e) => setPassword(e.target.value)}\n        placeholder=\"Password\"\n        autoFocus\n        required\n      />\n      <br />\n      <input\n        type=\"text\"\n        className=\"form-control\"\n        value={name}\n        onChange={(e) => setName(e.target.value)}\n        placeholder=\"Name\"\n        autoFocus\n        required=\"true\"\n      />\n      <br />\n      <CountryDropdown\n        value={country}\n        onChange={selectCountry}\n        style={{ fontSize: 15 }}\n      />\n      <br />\n      <br />\n      <RegionDropdown\n        disableWhenEmpty={true}\n        country={country}\n        value={region}\n        onChange={selectRegion}\n        style={{ fontSize: 15 }}\n      />\n      <br />\n      <br />\n      <PhoneInput\n        international\n        defaultCountry=\"PT\"\n        value={phoneNumber}\n        onChange={setPhoneNumber}\n      />\n      <br />\n      <h3>Type of User</h3>\n      <select onChange={(e) => setIsTeacher(e.target.value)}>\n        <option value={isTeacher}>Teacher</option>\n        <option value={isTeacher}>Student</option>\n        <option value={isTeacher}>Other</option>\n      </select>\n      <br />\n      <br />\n      <input\n        type=\"text\"\n        className=\"form-control\"\n        value={school}\n        onChange={(e) => setSchool(e.target.value)}\n        placeholder=\"School\"\n        autoFocus\n        required=\"false\"\n      />\n      <br />\n      <Button\n        onClick={handleSubmit}\n        type=\"primary\"\n        className=\"mb-3\"\n        shape=\"round\"\n        block\n        icon={<CheckOutlined />}\n        size=\"large\"\n        disabled={!email || !password || !country}\n      >\n        Finish your Registration\n      </Button>\n    </form>\n  );\n\n  return (\n    <div className=\"wrapper\">\n      <div className=\"container p-5\">\n        <div className=\"row\">\n          <div className=\"col-md-6 offset-md-3\">\n            <h3>Complete your Registration</h3>\n            {completeRegistrationForm()}\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default RegisterComplete;\n"]},"metadata":{},"sourceType":"module"}