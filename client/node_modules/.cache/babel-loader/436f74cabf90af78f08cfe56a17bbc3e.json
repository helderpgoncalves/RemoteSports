{"ast":null,"code":"import{Fragment as _Fragment}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{jsx as _jsx}from\"react/jsx-runtime\";import _regeneratorRuntime from\"/Users/user/GitHub/remotesports/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/user/GitHub/remotesports/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _classCallCheck from\"/Users/user/GitHub/remotesports/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/user/GitHub/remotesports/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"/Users/user/GitHub/remotesports/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/Users/user/GitHub/remotesports/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React,{Component}from\"react\";import{db}from\"../../firebase\";import AsyncSelect from\"react-select/async\";import{Button}from\"@material-ui/core\";import{Table}from\"react-bootstrap\";import{DeleteOutlined}from\"@ant-design/icons\";var SearchFirestore=/*#__PURE__*/function(_Component){_inherits(SearchFirestore,_Component);var _super=_createSuper(SearchFirestore);function SearchFirestore(props){var _this;_classCallCheck(this,SearchFirestore);_this=_super.call(this,props);_this.mySubmitHandler=function(event){var docRef=db.collection(\"users\").doc(event.value);docRef.get().then(function(doc){if(doc.exists){// Evitar Duplicados\n// TODO //\n_this.state.data.push(doc.data());console.log(_this.state.data);}else{console.log(\"No such document!\");}}).catch(function(error){console.log(\"Error getting document:\",error);});};_this.loadOptions=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(inputValue){return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:inputValue=inputValue.toLowerCase().replace(/\\W/g,\"\");return _context.abrupt(\"return\",new Promise(function(resolve){db.collection(\"users\").orderBy(\"email\").startAt(inputValue).endAt(inputValue+\"\\uF8FF\").get().then(function(docs){if(!docs.empty){var recommendedTags=[];docs.forEach(function(doc){var tag={value:doc.id,label:doc.data().email};recommendedTags.push(tag);});return resolve(recommendedTags);}else{return resolve([]);}});}));case 2:case\"end\":return _context.stop();}}},_callee);}));return function(_x){return _ref.apply(this,arguments);};}();_this.handleOnChange=function(tags){_this.setState({selectedTag:[tags]});};_this.getRows=function(){var rows=[];if(_this.state.data)_this.state.data.map(function(element){rows.push(/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:element.name}),/*#__PURE__*/_jsx(\"td\",{children:element.email}),/*#__PURE__*/_jsx(\"td\",{children:element.school}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(Button,{onClick:function onClick(element){return _this.handleDeleteRow(element);},children:/*#__PURE__*/_jsx(DeleteOutlined,{})})})]},element));});return rows;};_this.state={selectedTag:[],data:[]};return _this;}_createClass(SearchFirestore,[{key:\"handleDeleteRow\",value:function handleDeleteRow(i){console.log(i.name);}},{key:\"render\",value:function render(){var _this2=this;return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"pl-5 pr-5\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Search Student by Email:\"}),/*#__PURE__*/_jsx(AsyncSelect,{loadOptions:this.loadOptions,onChange:this.handleOnChange}),this.state.selectedTag.map(function(e,index){return/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(Button,{onClick:_this2.mySubmitHandler(e),variant:\"contained\",color:\"primary\",style:{margin:\"20px\"},children:\"ADD STUDENT TO CLASS\"})});})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"pl-5 pr-5 pt-5\",children:[/*#__PURE__*/_jsx(\"h4\",{className:\"text-center\",children:\"CLASS\"}),/*#__PURE__*/_jsxs(Table,{children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:\"Name\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Email\"}),/*#__PURE__*/_jsx(\"th\",{children:\"School\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Delete\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:this.getRows()})]})]})]});}}]);return SearchFirestore;}(Component);export default SearchFirestore;","map":{"version":3,"sources":["/Users/user/GitHub/remotesports/client/src/components/SearchFirestore/SearchFirestore.js"],"names":["React","Component","db","AsyncSelect","Button","Table","DeleteOutlined","SearchFirestore","props","mySubmitHandler","event","docRef","collection","doc","value","get","then","exists","state","data","push","console","log","catch","error","loadOptions","inputValue","toLowerCase","replace","Promise","resolve","orderBy","startAt","endAt","docs","empty","recommendedTags","forEach","tag","id","label","email","handleOnChange","tags","setState","selectedTag","getRows","rows","map","element","name","school","handleDeleteRow","i","e","index","margin"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\nimport { db } from \"../../firebase\";\nimport AsyncSelect from \"react-select/async\";\nimport { Button } from \"@material-ui/core\";\nimport { Table } from \"react-bootstrap\";\nimport { DeleteOutlined } from \"@ant-design/icons\";\n\nclass SearchFirestore extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      selectedTag: [],\n      data: [],\n    };\n  }\n\n  mySubmitHandler = (event) => {\n    const docRef = db.collection(\"users\").doc(event.value);\n\n    docRef\n      .get()\n      .then((doc) => {\n        if (doc.exists) {\n          // Evitar Duplicados\n          // TODO //\n          this.state.data.push(doc.data())\n          console.log(this.state.data);\n        } else {\n          console.log(\"No such document!\");\n        }\n      })\n      .catch(function (error) {\n        console.log(\"Error getting document:\", error);\n      });\n  };\n\n  loadOptions = async (inputValue) => {\n    inputValue = inputValue.toLowerCase().replace(/\\W/g, \"\");\n    return new Promise((resolve) => {\n      db.collection(\"users\")\n        .orderBy(\"email\")\n        .startAt(inputValue)\n        .endAt(inputValue + \"\\uf8ff\")\n        .get()\n        .then((docs) => {\n          if (!docs.empty) {\n            let recommendedTags = [];\n            docs.forEach(function (doc) {\n              const tag = {\n                value: doc.id,\n                label: doc.data().email,\n              };\n              recommendedTags.push(tag);\n            });\n            return resolve(recommendedTags);\n          } else {\n            return resolve([]);\n          }\n        });\n    });\n  };\n\n  handleOnChange = (tags) => {\n    this.setState({\n      selectedTag: [tags],\n    });\n  };\n\n  handleDeleteRow(i) {\n    console.log(i.name);\n  }\n\n  getRows = () => {\n    let rows = [];\n\n    if (this.state.data)\n      this.state.data.map(element => {\n        rows.push(\n          <tr key={element}>\n            <td>{element.name}</td>\n            <td>{element.email}</td>\n            <td>{element.school}</td>\n            <td>\n              <Button onClick={(element) => this.handleDeleteRow(element)}>\n                <DeleteOutlined />\n              </Button>\n            </td>\n          </tr>\n        );\n      });\n\n    return rows;\n  };\n\n  render() {\n    return (\n      <>\n        <div className=\"pl-5 pr-5\">\n          <h3>Search Student by Email:</h3>\n          <AsyncSelect\n            loadOptions={this.loadOptions}\n            onChange={this.handleOnChange}\n          />\n          {this.state.selectedTag.map((e, index) => {\n            return (\n              <div>\n                <Button\n                  onClick={this.mySubmitHandler(e)}\n                  variant=\"contained\"\n                  color=\"primary\"\n                  style={{ margin: \"20px\" }}\n                >\n                  ADD STUDENT TO CLASS\n                </Button>\n              </div>\n            );\n          })}\n        </div>\n        <div className=\"pl-5 pr-5 pt-5\">\n          \n          <h4 className=\"text-center\">CLASS</h4>\n          <Table>\n            <thead>\n              <tr>\n                <th>Name</th>\n                <th>Email</th>\n                <th>School</th>\n                <th>Delete</th>\n              </tr>\n            </thead>\n            <tbody>\n            {this.getRows()}\n            </tbody>\n          </Table>\n        </div>\n      </>\n    );\n  }\n}\n\nexport default SearchFirestore;\n"]},"metadata":{},"sourceType":"module"}